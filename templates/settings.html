<!DOCTYPE html>
<html><head><meta charset="utf-8"/><title>Encrypted Settings</title>
<style>
body{font-family:system-ui,Arial;background:#f6f7fb;margin:0}
main{max-width:840px;margin:40px auto;background:#fff;padding:24px;border-radius:10px;box-shadow:0 4px 20px rgba(0,0,0,.06)}
input{padding:10px;border:1px solid #ccc;border-radius:6px;width:100%}
button{padding:10px 14px;border:none;background:#0d6efd;color:#fff;border-radius:6px;cursor:pointer}
table{width:100%;border-collapse:collapse;margin-top:18px}
th,td{border-bottom:1px solid #eee;text-align:left;padding:8px}
.del{background:#dc3545}
.tip{color:#666;font-size:14px}
</style></head>
<body><main>
<h2>Encrypted Secrets</h2>
<p class="tip">Values are stored encrypted. Plaintext is never displayed.</p>
<form method="post" action="/settings/secret">
<div style="display:grid;grid-template-columns:1fr 2fr auto;gap:8px;align-items:center">
  <input name="key" placeholder="FACEBOOK_CLIENT_ID" required>
  <input name="value" placeholder="client id / secret / redirect uri ..." required>
  <button type="submit">Save</button>
</div>
</form>
<table><thead><tr><th>Key</th><th>Created</th><th></th></tr></thead><tbody>
{% for s in secrets %}
<tr><td>{{ s.key }}</td><td>{{ s.created_at }}</td><td><button class="del" onclick="delSecret('{{ s.key }}')">Delete</button></td></tr>
{% else %}<tr><td colspan="3">No secrets saved yet.</td></tr>{% endfor %}
</tbody></table>
<p style="margin-top:14px"><a href="/">‚Üê Back</a></p>
<script>
async function delSecret(key){
  const apiKey = prompt('Enter API Key'); if(!apiKey) return;
  await fetch('/settings/secret/'+encodeURIComponent(key), {method:'DELETE', headers:{'X-API-Key': apiKey}});
  location.reload();
}
</script>
</main></body></html>