<!DOCTYPE html>
<html><head><meta charset="utf-8"/><title>Encrypted Settings</title></head>
<body>
<h2>Encrypted Secrets</h2>
<form method="post" action="/settings/secret">
  <input name="key" placeholder="FACEBOOK_CLIENT_ID" required/>
  <input name="value" placeholder="client id / secret / redirect uri ..." required/>
  <button type="submit">Save</button>
</form>
<table border="1" cellpadding="6" cellspacing="0">
  <tr><th>Key</th><th>Created</th><th></th></tr>
  {% for s in secrets %}
    <tr><td>{{ s.key }}</td><td>{{ s.created_at }}</td><td><button onclick="delSecret('{{ s.key }}')">Delete</button></td></tr>
  {% else %}<tr><td colspan="3">No secrets saved yet.</td></tr>{% endfor %}
</table>
<p><a href="/">‚Üê Back</a></p>
<script>
async function delSecret(key){
  const apiKey = prompt('Enter API Key'); if(!apiKey) return;
  await fetch('/settings/secret/'+encodeURIComponent(key), {method:'DELETE', headers:{'X-API-Key': apiKey}});
  location.reload();
}
</script>
</body></html>